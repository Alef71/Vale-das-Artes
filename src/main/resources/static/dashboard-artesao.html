<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Artes√£o | Vale das Artes</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style-componente-header.css">
    <link rel="stylesheet" href="css/style-componente-footer.css">
    <link rel="stylesheet" href="css/style-perfil-artesao.css"> 
</head>
<body>

    <header id="header-placeholder"></header>

    <main class="container-dashboard">
        
        <section class="dashboard-header-top">
            <div>
                <h1 id="dashboard-title">Painel do Artes√£o</h1>
                <p class="subtitle">Gerencie seu ateli√™ e suas cria√ß√µes</p>
            </div>
            <a href="javascript:void(0)" id="btn-perfil-publico" class="link-perfil-publico" target="_blank">
                <i class="fas fa-external-link-alt"></i> Ver Perfil P√∫blico
            </a>
        </section>

        <div class="dashboard-grid">
            
            <aside class="dashboard-sidebar">
                <div class="card-sidebar">
                    <div class="foto-container">
                        <div class="avatar-wrapper">
                            <img id="foto-preview-artista" 
                                 src="https://via.placeholder.com/150?text=Foto" 
                                 alt="Foto do Perfil">
                            
                            <button type="button" id="btn-camera-upload" title="Alterar foto">
                                <i class="fas fa-camera"></i>
                            </button>
                        </div>
                        <input type="file" id="input-foto-artista" accept="image/png, image/jpeg" style="display: none;">
                        <p id="upload-status-artista" class="status-msg"></p>
                    </div>

                    <h3 id="artesao-nome-display">Carregando...</h3>
                    <p class="sidebar-role">Artes√£o Verificado</p>

                    <hr class="divider">

                    <nav class="sidebar-menu">
                        <a href="#secao-produtos" class="menu-item active">
                            <i class="fas fa-box-open"></i> Meus Produtos
                        </a>
                        <a href="#secao-novo-produto" class="menu-item">
                            <i class="fas fa-plus-circle"></i> Adicionar Produto
                        </a>
                        <a href="#secao-dados" class="menu-item">
                            <i class="fas fa-user-edit"></i> Dados Pessoais
                        </a>
                        <a href="#secao-endereco" class="menu-item">
                            <i class="fas fa-map-marker-alt"></i> Endere√ßo do Ateli√™
                        </a>
                    </nav>
                </div>
            </aside>

            <section class="dashboard-content">

                <div id="secao-produtos" class="content-card mb-30">
                    <div class="header-card">
                        <h2><i class="fas fa-th-list"></i> Vitrine de Produtos</h2>
                        <p>Gerencie os produtos que est√£o vis√≠veis para os clientes.</p>
                    </div>
                    <div id="lista-meus-produtos" class="grid-produtos">
                        <p class="loading-text">Carregando seus produtos...</p>
                    </div>
                </div>

                <div id="secao-novo-produto" class="content-card mb-30 highlight-card">
                    <div class="header-card">
                        <h2><i class="fas fa-plus"></i> Cadastrar Novo Produto</h2>
                    </div>
                    <form id="form-novo-produto" enctype="multipart/form-data" class="form-grid">
                        
                        <div class="form-col-img">
                            <label class="upload-box" style="position: relative; overflow: hidden;">
                                <div id="upload-placeholder" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <span>Escolher Foto</span>
                                </div>

                                <img id="produto-preview-img" src="" alt="Preview do Produto" 
                                     style="display: none; width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; z-index: 1;">
                                
                                <input type="file" id="produto-foto" name="foto" accept="image/*" required>
                            </label>
                        </div>
                        <div class="form-col-data">
                            <div class="form-group">
                                <label>Nome da Pe√ßa</label>
                                <input type="text" id="produto-nome" name="nome" placeholder="Ex: Vaso de Cer√¢mica Azul" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group half">
                                    <label>Pre√ßo (R$)</label>
                                    <input type="number" id="produto-preco" name="preco" step="0.01" placeholder="0,00" required>
                                </div>
                                <div class="form-group half">
                                    <label>Categoria</label>
                                    <select id="produto-categoria" name="categoria" required>
                                        <option value="">Selecione...</option>
                                        <option value="CERAMICA">Cer√¢mica</option>
                                        <option value="MADEIRA">Madeira</option>
                                        <option value="TECIDO">Tecido/Tric√¥</option>
                                        <option value="JOALHERIA">Joalheria</option>
                                        <option value="PINTURA">Pintura</option>
                                        <option value="OUTROS">Outros</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Descri√ß√£o Detalhada</label>
                                <textarea id="produto-descricao" name="descricao" rows="2" placeholder="Descreva os materiais e dimens√µes..." required></textarea>
                            </div>
                            <button type="submit" class="btn-full btn-success">Publicar Produto</button>
                        </div>
                    </form>
                </div>

                <div id="secao-dados" class="content-card mb-30">
                    <div class="header-card">
                        <h2><i class="fas fa-user-cog"></i> Perfil do Artes√£o</h2>
                        <p>Estas informa√ß√µes aparecem no seu perfil p√∫blico.</p>
                    </div>
                    
                    <div class="split-view">
                        <div class="edit-area">
                            <form id="form-editar-artesao">
                                <div class="form-group">
                                    <label>Nome Completo</label>
                                    <input type="text" id="artesao-nome" name="nome" required>
                                </div>
                                <div class="form-group">
                                    <label>Nome do Ateli√™ (Marca)</label>
                                    <input type="text" id="artesao-nome-empresa" name="nomeEmpresa">
                                </div>
                                <div class="form-group">
                                    <label>Biografia (Conte sua hist√≥ria)</label>
                                    <textarea id="artesao-biografia" name="biografia" rows="6" onkeyup="atualizarPreview(this.value)"></textarea>
                                </div>
                                <button type="submit" class="btn-full">Salvar Altera√ß√µes</button>
                            </form>
                        </div>

                        <div class="preview-area">
                            <label class="preview-label"><i class="fas fa-eye"></i> Pr√©-visualiza√ß√£o</label>
                            <div class="preview-card">
                                <div class="preview-header">
                                    <div class="dot red"></div>
                                    <div class="dot yellow"></div>
                                    <div class="dot green"></div>
                                </div>
                                <div class="preview-content">
                                    <h4 id="preview-nome">Nome do Artes√£o</h4>
                                    <small id="preview-atelie">Ateli√™</small>
                                    <hr>
                                    <p id="preview-bio">Sua biografia aparecer√° aqui enquanto voc√™ digita...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="secao-endereco" class="content-card mt-30">
                    <div class="header-card">
                        <h2><i class="fas fa-map-marked-alt"></i> Endere√ßo do Ateli√™</h2>
                        <p>Local de onde seus produtos s√£o enviados.</p>
                    </div>

                    <form id="form-endereco" class="form-grid">
                        <div class="form-group">
                            <label>CEP</label>
                            <div style="display: flex; gap: 5px;">
                                <input type="text" id="endereco-cep" name="cep" placeholder="00000-000" maxlength="9">
                                <button type="button" id="btn-buscar-cep" style="cursor: pointer;" title="Buscar CEP">üîç</button>
                            </div>
                        </div>
                    
                        <div class="form-group">
                            <label>Telefone</label>
                            <input type="text" id="endereco-telefone" name="telefone" placeholder="(00) 00000-0000">
                        </div>
                    
                        <div class="form-group">
                            <label>Rua / Logradouro</label>
                            <input type="text" id="endereco-logradouro" name="logradouro">
                        </div>
                    
                        <div class="form-group">
                            <label>N√∫mero</label>
                            <input type="text" id="endereco-numero" name="numero">
                        </div>
                    
                        <div class="form-group">
                            <label>Complemento</label>
                            <input type="text" id="endereco-complemento" name="complemento">
                        </div>
                    
                        <div class="form-group">
                            <label>Bairro</label>
                            <input type="text" id="endereco-bairro" name="bairro">
                        </div>
                    
                        <div class="form-group">
                            <label>Cidade</label>
                            <input type="text" id="endereco-cidade" name="cidade">
                        </div>
                    
                        <div class="form-group">
                            <label>Estado (UF)</label>
                            <input type="text" id="endereco-estado" name="estado" maxlength="2">
                        </div>
                    
                        <div class="form-group full-width">
                            <button type="submit" class="btn-salvar">Salvar Endere√ßo</button>
                        </div>
                    </form>
                </div>

            </section>
        </div>
    </main>

    <div id="editProductModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Editar Produto</h2>
            <form id="form-editar-produto">
                <input type="hidden" id="edit-produto-id" name="id">
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="edit-produto-nome" name="nome" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="edit-produto-descricao" name="descricao" rows="4" required></textarea>
                </div>
                <div class="row-inputs">
                    <div class="form-group half">
                        <label>Pre√ßo</label>
                        <input type="number" id="edit-produto-preco" name="preco" step="0.01" required>
                    </div>
                    <div class="form-group half">
                        <label>Categoria</label>
                        <select id="edit-produto-categoria" name="categoria" required>
                            <option value="CERAMICA">Cer√¢mica</option>
                            <option value="MADEIRA">Madeira</option>
                            <option value="TECIDO">Tecido/Tric√¥</option>
                            <option value="JOALHERIA">Joalheria</option>
                            <option value="PINTURA">Pintura</option>
                            <option value="OUTROS">Outros</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn-full">Salvar Altera√ß√µes</button>
            </form>
        </div>
    </div>

    <footer id="footer-placeholder"></footer>

    <script>
        function atualizarPreview(texto) {
            const bioPreview = document.getElementById('preview-bio');
            if(bioPreview) {
                bioPreview.textContent = texto || 'Sua biografia aparecer√° aqui...';
            }
        }
        
        document.addEventListener("DOMContentLoaded", function() {
            setTimeout(() => {
                const nomeInput = document.getElementById('artesao-nome');
                const atelieInput = document.getElementById('artesao-nome-empresa');
                const bioInput = document.getElementById('artesao-biografia');
                
                if(nomeInput) {
                    document.getElementById('preview-nome').textContent = nomeInput.value || 'Nome';
                    nomeInput.addEventListener('keyup', (e) => document.getElementById('preview-nome').textContent = e.target.value);
                }
                if(atelieInput) {
                    document.getElementById('preview-atelie').textContent = atelieInput.value || 'Ateli√™';
                    atelieInput.addEventListener('keyup', (e) => document.getElementById('preview-atelie').textContent = e.target.value);
                }
                if(bioInput) {
                    document.getElementById('preview-bio').textContent = bioInput.value || 'Biografia...';
                }
            }, 1000); 
        });
    </script>

    <script src="js/main.js"></script>
    <script src="js/dashboard-artesao.js"></script>
</body>
</html>